schema: '2.0'
stages:
  unzip_data:
    cmd: unzip -qq data/raw.zip -d data/raw
    deps:
    - path: data/raw.zip
      md5: f377913605f3e6e7d4a00773709e8624
      size: 221464048
    outs:
    - path: data/raw
      md5: c3c37fdb86b6b22494d53ed99bb35491.dir
      size: 228519486
      nfiles: 1009
  prepare_data:
    cmd: python -m src.data.make_dataset data/raw data/processed
    deps:
    - path: data/raw
      md5: c3c37fdb86b6b22494d53ed99bb35491.dir
      size: 228519486
      nfiles: 1009
    - path: src/data/make_dataset.py
      md5: e9e3f204dfe3c6b639c86bd55b96bdb5
      size: 1662
    outs:
    - path: data/processed
      md5: 6950ca417e0d0c7095d73bdfa1df0e8a.dir
      size: 8086239
      nfiles: 1009
  fit_model:
    cmd: python -m src.models.train_model data/processed/train data/processed/validation
      outputs/model.pth
    deps:
    - path: Dockerfile
      md5: 1de36cd220887417800c5ca0ed385461
      size: 663
    - path: data/processed/train
      md5: fc0dbd90486ac4f17ea9d0b0ba1b1098.dir
      size: 5254924
      nfiles: 656
    - path: data/processed/validation
      md5: f733c0b2deb5beab16c2abd35c65360e.dir
      size: 2459544
      nfiles: 306
    - path: src/data/data.py
      md5: b3d82b2fb261bd32f5d4b99afa604638
      size: 982
    - path: src/models/model.py
      md5: 343ed433a1a2724367d6c386990c2a86
      size: 1080
    - path: src/models/train_model.py
      md5: 714352e6653b29c865d45b93e8c6091f
      size: 3818
    outs:
    - path: outputs/model.pth
      md5: 89f28df7f05cb0ef1010936c3339fe7d
      size: 6411496
  evaluate_model:
    cmd: python -m src.models.predict_model outputs/model.pth data/processed/test
    deps:
    - path: data/processed/test
      md5: fe9b7ec934777cc04987749857ccd938.dir
      size: 371771
      nfiles: 47
    - path: outputs/model.pth
      md5: 89f28df7f05cb0ef1010936c3339fe7d
      size: 6411496
    - path: src/models/model.py
      md5: 343ed433a1a2724367d6c386990c2a86
      size: 1080
    - path: src/models/predict_model.py
      md5: 8beb72dac5712f48ad6bfb41398ec4f1
      size: 1380
    outs:
    - path: outputs/metrics.json
      md5: 2b5794276172cb68e116c35a28de8b75
      size: 37
  build_image:
    cmd: docker build -t europe-west4-docker.pkg.dev/dtumlops-project-mask-no-mask/dtu-mlops/serve
      .
    deps:
    - path: outputs/model.pth
      md5: 97cf4cbfeab715a443ede44ec2b6c0ea
      size: 6412392
    - path: src/models/model_handler.py
      md5: 92baf5fabc3a5bd03a62a758fe23e592
      size: 1251
